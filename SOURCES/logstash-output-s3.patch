--- lib/logstash/outputs/s3.rb	2015-09-18 12:06:22.932048898 +0300
+++ lib/logstash/outputs/s3.rb	2015-09-18 12:12:56.352058278 +0300
@@ -253,7 +253,9 @@
  public
  def register
    require "aws-sdk"
+   require "fileutils"
    @temp_directory = "/opt/logstash/S3_temp/"
+   @s3_tempdir_owner = "logstash"
 
    if (@tags.size != 0)
        @tag_path = ""
@@ -263,10 +265,13 @@
    end
 
    if !(File.directory? @temp_directory)
-    @logger.debug "S3: Directory "+@temp_directory+" doesn't exist, let's make it!"
-    Dir.mkdir(@temp_directory)
+    @logger.info "S3: Directory "+@temp_directory+" doesn't exist, let's make it!"
+     if Process.euid == 0
+	Dir.mkdir(@temp_directory)
+	FileUtils.chown("#{@s3_tempdir_owner}", "#{@s3_tempdir_owner}", "#{@temp_directory}")
+     end
    else
-    @logger.debug "S3: Directory "+@temp_directory+" exist, nothing to do"
+    @logger.info "S3: Directory "+@temp_directory+" exist, nothing to do"
    end 
    
    if (@restore == true )
